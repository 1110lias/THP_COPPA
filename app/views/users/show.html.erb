<!-- app/views/users/show.html.erb -->
<h1>User Profile</h1>

<div class="profile-container">
  <p><strong>First Name:</strong> <%= @user.first_name %></p>
  <p><strong>Last Name:</strong> <%= @user.last_name %></p>
  <p><strong>Email:</strong> <%= @user.email %></p>
  <p><strong>Joined:</strong> <%= @user.created_at.strftime("%B %d, %Y") %></p>
  <!-- Add other profile fields if necessary -->

  <!-- Conditional content for admin users -->
  <% if @user.isadmin? %>
    <div class="admin-options">
      <h2>Admin Options</h2>
      <p>Role: Admin</p>
      <%= link_to 'Manage Users', users_path, class: 'btn btn-secondary' %>
      <%= link_to 'Admin Dashboard', "admin_dashboard_path", class: 'btn btn-secondary' %>
      <!-- Add other admin-specific options or information here -->
    </div>
  <% else %>
    <div class="user-info">
      <p>Role: User</p>
      <!-- Add other user-specific information or options here -->
    </div>
  <% end %>
</div>

<%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-primary" %>

<% if current_user.isadmin? %>
  <%= link_to 'Delete User', user_path(@user), method: :delete, data: { confirm: 'Are you sure you want to delete this user?' }, class: 'btn btn-danger' %>

  <!-- Form to toggle admin status -->
  <div class="admin-status-form">
    <%= form_with(model: @user, url: update_admin_status_user_path(@user), method: :patch, local: true) do |form| %>
      <div class="form-group">
        <%= form.label :isadmin, 'Admin Status' %>
        <%= form.check_box :isadmin %>
      </div>
      <%= form.submit 'Update Admin Status', class: 'btn btn-primary' %>
    <% end %>
  </div>
<% end %>

<h2>Previous Orders</h2>
<div class="orders-container">
  <% if @orders.present? %>
    <ul>
      <% @orders.each do |order| %>
        <li>
          <strong>Order ID:</strong> <%= order.id %><br>
          <strong>Date:</strong> <%= order.created_at.strftime("%B %d, %Y") %><br>
          <strong>Total:</strong> $<%= order.total_price %>
          <!-- Add other order details if necessary -->
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No previous orders found.</p>
  <% end %>
</div>
