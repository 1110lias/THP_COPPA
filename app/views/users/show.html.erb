<div class="flex flex-col justify-center items-center">
  <h1 class="my-4 text-3xl">Welcome back <%= @user.first_name %>!</h1>

  <div class="profile-container my-6">
    <p class="my-1"><strong>First Name:</strong> <%= @user.first_name %></p>
    <p class="my-1"><strong>Last Name:</strong> <%= @user.last_name %></p>
    <p class="my-1"><strong>Email:</strong> <%= @user.email %></p>
    <p class="my-1"><strong>Joined:</strong> <%= @user.created_at.strftime("%B %d, %Y") %></p>
  </div>

  <% if @user.isadmin? %>
      <h2 class="text-3xl mt-3">Admin Options</h2>
    <div class="bg-white border border-gray-200 rounded-lg shadow flex flex-col justify-center items-center mt-2 mb-6 p-2">
      <div class="p-6">
        <%= link_to 'Manage Users', users_path, class: 'btn btn-outline-secondary mx-2' %>
        <%= link_to 'Admin Dashboard', "admin_dashboard_path", class: 'btn btn-outline-primary mx-2' %>
        <div class="flex flex-row justify-center items-center mt-4">
          <%= form_with(model: @user, url: update_admin_status_user_path(@user), method: :patch, local: true) do |form| %>
            <div class="form-group mx-5 my-2">
              <%= form.label :isadmin, 'Admin Status' %>
              <%= form.check_box :isadmin %>
            </div>
            <%= form.submit 'Update Admin Status', class: 'btn btn-danger' %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>



  <div class="flex flex-col justify-center items-center mx-6 p-6">
    <h2 class="text-3xl mt-3">Previous Orders</h2>
    <div class="overflow-x-auto ">
      <% if @orders.present? %>
        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 mt-2 mb-3 p-6">
          <thead>
            <tr>
              <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-700">Order ID</th>
              <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-700">Date</th>
              <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-700">Total</th>
            </tr>
          </thead>
          <tbody>
            <% @orders.each do |order| %>
              <tr>
                <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-700"><%= order.id %></td>
                <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-700"><%= order.created_at.strftime("%B %d, %Y") %></td>
                <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-700">$<%= order.total_price %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p class="p-4 text-center">No previous orders found.</p>
      <% end %>
    </div>
  </div>


    <div class="flex flex-col justify-center items-center mt-2 mb-6 p-6">
    <h2 class="text-3xl mt-3">User Options</h2>

    <div class="flex flex-row justify-around items-center m-2 p-2">
      <%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-secondary mx-8" %>

      <%= link_to 'Delete account', user_path(@user), method: :delete, data: { confirm: 'Are you sure you want to delete this user?' }, class: 'btn btn-danger mx-8' %>
    </div>
  </div>
</div>
