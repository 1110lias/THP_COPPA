<h1>Your Cart</h1>

<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Total</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @cart_products.each do |cart_product| %>
      <tr>
        <td><%= cart_product.product.name %></td>
        <td><%= cart_product.quantity %></td>
        <td><%= number_to_currency(cart_product.product.price) %></td>
        <td><%= number_to_currency(cart_product.product.price * cart_product.quantity) %></td>
        <td>
          <%= link_to 'Remove', cart_product_path(cart_product), method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Total: <%= number_to_currency(@cart_products.sum { |cp| cp.product.price * cp.quantity }) %></h2>

<%= link_to 'Checkout', new_order_path, class: 'button' %>
<%= link_to 'Continue Shopping', products_path, class: 'button' %>